(this["webpackJsonpauth-app"]=this["webpackJsonpauth-app"]||[]).push([[0],{34:function(e,t,a){e.exports=a(46)},39:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),l=a.n(c),o=(a(39),a(17)),s=a(18),u=a(32),i=a(33),m=a(9),d=a(3),f=a(2),g="PROFILE/ADD_TASK",p=a(48),E=function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,null,[{key:"login",value:function(e){var t=e.login,a=e.password,n=JSON.parse(localStorage.getItem("accounts"))||[],r=n&&n.find((function(e){return e.login===t&&e.password===a}));return!!r&&(localStorage.setItem("currentUser",JSON.stringify(r)),localStorage.setItem("logged",!0),r)}},{key:"restoreSession",value:function(){var e=JSON.parse(localStorage.getItem("currentUser"));return e||null}},{key:"register",value:function(e){var t=e.login,a=e.password,n=localStorage.getItem("accounts"),r=n?JSON.parse(n):[];if(r&&r.find((function(e){return e.login===t})))return!1;var c={id:Object(p.a)(),login:t,password:a,tasks:[],receivedTasks:[]};return r.push(c),localStorage.setItem("accounts",JSON.stringify(r)),!0}},{key:"addTask",value:function(e){var t=JSON.parse(localStorage.getItem("currentUser")),a={id:Object(p.a)(),task:e,date:new Date,authorId:t.id};t.tasks.unshift(a),localStorage.setItem("currentUser",JSON.stringify(t));var n=JSON.parse(localStorage.getItem("accounts")),r=n.map((function(e){return e.id})).indexOf(t.id);return-1!==r&&(n[r]=t),localStorage.setItem("accounts",JSON.stringify(n)),a}},{key:"deleteTask",value:function(e){var t=JSON.parse(localStorage.getItem("currentUser"));t.tasks=t.tasks.filter((function(t){return t.id!==e})),localStorage.setItem("currentUser",JSON.stringify(t));var a=JSON.parse(localStorage.getItem("accounts")),n=a.map((function(e){return e.id})).indexOf(t.id);-1!==n&&(a[n]=t),localStorage.setItem("accounts",JSON.stringify(a))}},{key:"deleteReceivedTask",value:function(e){var t=JSON.parse(localStorage.getItem("currentUser"));t.receivedTasks=t.receivedTasks.filter((function(t){return t.id!==e})),localStorage.setItem("currentUser",JSON.stringify(t));var a=JSON.parse(localStorage.getItem("accounts")),n=a.map((function(e){return e.id})).indexOf(t.id);-1!==n&&(a[n]=t),localStorage.setItem("accounts",JSON.stringify(a))}},{key:"sendTask",value:function(e,t){var a=JSON.parse(localStorage.getItem("accounts")),n=JSON.parse(localStorage.getItem("currentUser")),r=a.find((function(e){return e.login===t})),c={id:Object(p.a)(),task:e,authorName:n.login,authorId:n.id,date:new Date};r.receivedTasks.unshift(c);var l=a.map((function(e){return e.id})).indexOf(r.id);-1!==l&&(a[l]=r),localStorage.setItem("accounts",JSON.stringify(a))}},{key:"closeCurrentSession",value:function(){localStorage.removeItem("logged"),localStorage.removeItem("currentUser")}},{key:"updateTask",value:function(e,t){var a=JSON.parse(localStorage.getItem("currentUser")),n=a.tasks,r=n.map((function(e){return e.id})).indexOf(e);-1!==r&&(n[r]={id:e,task:t,date:new Date}),localStorage.setItem("currentUser",JSON.stringify(a));var c=JSON.parse(localStorage.getItem("accounts")),l=c.map((function(e){return e.id})).indexOf(a.id);-1!==l&&(c[l]=a),localStorage.setItem("accounts",JSON.stringify(c))}}]),e}(),v=Object(f.b)((function(e){return{loginStatus:e.userReducer.loginStatus}}),{userLogout:function(){return function(e){if(!window.confirm("Want log out?"))return!1;E.closeCurrentSession(),e({type:"AUTH/USER_LOGOUT"})}}})((function(e){var t=e.userLogout,a=e.loginStatus;return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement(d.b,{to:"/",className:"brand-logo center"},"task-manager-app"),r.a.createElement("ul",{id:"nav-mobile",className:"right"},a&&r.a.createElement("li",null,r.a.createElement(d.b,{to:"/profile"},"Profile")," "),!a&&r.a.createElement("li",null,r.a.createElement(d.b,{to:"/register"},"Registration")," "),a?r.a.createElement("li",null,r.a.createElement(d.b,{to:"/profile",onClick:t},"Log Out")):r.a.createElement("li",null,r.a.createElement(d.b,{to:"/login"},"Login")," ")))))})),b=a(4),S=function(e){var t=e.onSubmit,a=Object(n.useState)(""),c=Object(b.a)(a,2),l=c[0],o=c[1],s=Object(n.useState)(""),u=Object(b.a)(s,2),i=u[0],m=u[1];return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t({login:l,password:i})},className:"col s12"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{required:!0,type:"text",name:"user",value:l,onChange:function(e){return o(e.target.value)}}),r.a.createElement("label",{htmlFor:"password"},"Login")),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{required:!0,type:"password",name:"password",value:i,onChange:function(e){return m(e.target.value)}}),r.a.createElement("label",{htmlFor:"password"},"Password")),r.a.createElement("button",{type:"submit",className:"btn"},"Submit"))},O=function(e){var t=e.text,a=e.type;return r.a.createElement("div",{className:a},t)},k=Object(f.b)((function(e){return{loginStatus:e.userReducer.loginStatus}}),{userRegistration:function(e){var t=e.login,a=e.password;return function(e){return!!E.register({login:t,password:a})}}})((function(e){var t=e.loginStatus,a=e.userRegistration,c=Object(n.useState)(!1),l=Object(b.a)(c,2),o=l[0],s=l[1],u=Object(n.useState)(!1),i=Object(b.a)(u,2),f=i[0],g=i[1];Object(n.useEffect)((function(){var e=setTimeout((function(){return s(!1)}),3e3);return function(){clearTimeout(e)}}),[o]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row container"},o&&r.a.createElement("div",{className:"col s12"},r.a.createElement(O,{type:"alert_warn",text:"Username is already exists, try another name"})),r.a.createElement("h5",{style:{textAlign:"center",color:"grey"}},"Registration"),r.a.createElement(S,{onSubmit:function(e){var t=e.login,n=e.password;a({login:t,password:n})?g(!0):s(!0)}}),f&&r.a.createElement("div",{className:"col s12 alert_succesful"},r.a.createElement(O,{text:"Account created succesful"}),r.a.createElement(d.b,{to:"/login",style:{textAlign:"center",fontWeight:"400",fontStyle:"italic"}},"Log In!"))),t&&r.a.createElement(m.a,{to:"/profile"}))})),y=Object(f.b)((function(e){return{loginStatus:e.userReducer.loginStatus}}),{userLogin:function(e){var t=e.login,a=e.password;return function(e){var n=E.login({login:t,password:a});return!!n&&(e({type:"AUTH/USER_LOGIN",payload:n}),!0)}}})((function(e){var t=e.loginStatus,a=e.userLogin,c=e.history,l=Object(n.useState)(!1),o=Object(b.a)(l,2),s=o[0],u=o[1];Object(n.useEffect)((function(){var e=setTimeout((function(){return u(!1)}),3e3);return function(){clearTimeout(e)}}),[s]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row container"},s&&r.a.createElement("div",{className:"col s12"},r.a.createElement(O,{type:"alert_warn",text:"Username or password isn't correct!"})),r.a.createElement("h5",{style:{textAlign:"center",color:"grey"}},"Login"),r.a.createElement(S,{onSubmit:function(e){var t=e.login,n=e.password;if(a({login:t,password:n}))return alert("You have logged succesful"),c.push("/profile");u(!0)}})),t&&r.a.createElement(m.a,{to:"/profile"}))})),h=function(e){var t=e.onSubmit,a=Object(n.useState)(""),c=Object(b.a)(a,2),l=c[0],o=c[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t({task:l}),o("")},className:"col s12"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:function(e){return o(e.target.value)},type:"text",value:l,required:!0}),r.a.createElement("label",{htmlFor:"text"},"Add task")),r.a.createElement("button",{type:"submit",className:"btn"},"Submit")))},N=a(29),T=a.n(N),j=Object(f.b)(null,{updateTask:function(e,t){return function(a){E.updateTask(e,t),a({type:"PROFILE/UPDATE_TASK",payload:{id:e,task:t}})}}})((function(e){var t=e.onDelete,a=e.tasks,c=e.label,l=e.updateTask,o=Object(n.useState)(null),s=Object(b.a)(o,2),u=s[0],i=s[1],m=Object(n.useState)(""),d=Object(b.a)(m,2),f=d[0],g=d[1];return r.a.createElement("div",{className:"col s6"},r.a.createElement("h5",{style:{textAlign:"center",color:"grey"}},c),r.a.createElement("div",{className:"collection"},a&&a.map((function(e){return r.a.createElement("li",{className:"collection-item",key:e.id},e.task," ",e.authorName&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("small",null,"from"," ",r.a.createElement("span",{style:{color:"lightcoral"}},e.authorName))),r.a.createElement("br",null),r.a.createElement("small",null,T()(e.date).fromNow()),r.a.createElement("i",{onClick:function(){return t(e.id)},className:"material-icons trashcan"},"delete_forever"),!e.authorName&&r.a.createElement("i",{onClick:function(){i(null===u?e.id:null)},className:"material-icons edit"},"edit"),u===e.id&&r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i(null),function(){if(""===f)return!1;l(u,f)}()}},r.a.createElement("input",{type:"text",onChange:function(e){return g(e.target.value)},defaultValue:e.task}),r.a.createElement("button",{type:"submit",className:"waves-effect waves-light btn-small"},"Confirm changes")))}))))})),I=a(30),w=Object(f.b)((function(e){return{currentUser:e.userReducer.currentUser}}),null)((function(e){var t=e.currentUser,a=e.setReceiver,n=e.receiver,c=JSON.parse(localStorage.getItem("accounts")),l=c&&c.filter((function(e){return e.id!==t.id})).map((function(e){return r.a.createElement("option",{key:e.id},e.login)}));return r.a.createElement("div",null,r.a.createElement("select",{className:"browser-default input-field",onChange:function(e){a(e.target.value)},value:n},r.a.createElement("option",{disabled:!0,value:"select"},"select user"),l))})),U=Object(f.b)((function(e){return{currentUser:e.userReducer.currentUser}}),{sendTask:function(e,t){return function(a){E.sendTask(e,t)}}})((function(e){var t=e.sendTask,a=(e.currentUser,Object(n.useState)("")),c=Object(b.a)(a,2),l=c[0],o=c[1],s=Object(n.useState)("select"),u=Object(b.a)(s,2),i=u[0],m=u[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),"select"!==i?(t(l,i),alert("Task have been sent to ".concat(i," succesful!")),o("")):alert("You cant send tasks because you didn't select the user")},className:"col s12 container"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:function(e){return o(e.target.value)},type:"text",required:!0,value:l}),r.a.createElement("label",{htmlFor:"task"},"Enter text"),r.a.createElement(w,{setReceiver:m,receiver:i}),r.a.createElement("button",{type:"submit",className:"btn"},"Submit"))))})),R=function(){return r.a.createElement("div",{className:"container"},r.a.createElement(I.a,{trigger:r.a.createElement("button",{className:"btn popup_button"}," Send task"),position:"right top"},r.a.createElement("div",null,r.a.createElement(U,null))))},x=Object(f.b)((function(e){return{tasks:e.userReducer.tasks,receivedTasks:e.userReducer.receivedTasks}}),{addTask:function(e){return function(t){var a=E.addTask(e);t({type:g,payload:a})}},deleteTask:function(e){return function(t){E.deleteTask(e),t({type:"PROFILE/DELETE_TASK",payload:e})}},deleteReceivedTask:function(e){return function(t){E.deleteReceivedTask(e),t({type:"PROFILE/DELETE_RECEIVED_TASK",payload:e})}}})((function(e){var t=e.addTask,a=e.deleteTask,n=e.deleteReceivedTask,c=e.tasks,l=e.receivedTasks;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row container"},r.a.createElement(j,{onDelete:function(e){a(e)},tasks:c,label:"My Tasks"}),r.a.createElement(j,{onDelete:function(e){n(e)},label:"Received Tasks",tasks:l,author:l.author,date:l.date}),r.a.createElement(h,{onSubmit:function(e){var a=e.task;t(a)}})),r.a.createElement(R,null))})),J=Object(f.b)((function(e){return{currentUser:e.userReducer.currentUser,loginStatus:e.userReducer.loginStatus}}),null)((function(e){var t=e.currentUser,a=e.loginStatus;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container"},r.a.createElement("h4",{style:{textAlign:"center",color:"grey"}},"Welcome home"," ",r.a.createElement("span",{style:{color:"lightcoral"}},t.login),"!"),r.a.createElement(x,null)),!a&&r.a.createElement(m.a,{to:"/login"}))})),L=Object(f.b)((function(e){return{loginStatus:e.userReducer.loginStatus}}),null)((function(e){var t=e.loginStatus;return r.a.createElement(r.a.Fragment,null,t?r.a.createElement(d.b,{to:"/profile"},r.a.createElement("h1",{style:{color:"grey",textAlign:"center"}},"open task manager")):r.a.createElement(d.b,{to:"/login"},r.a.createElement("h1",{style:{color:"grey",textAlign:"center"}},"Log In to see your profile!")))})),A=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.props.restoreSession()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.b,{path:"/",component:v}),r.a.createElement(m.b,{exact:!0,path:"/",component:L}),r.a.createElement(m.b,{path:"/register",component:k}),r.a.createElement(m.b,{path:"/login",component:y}),r.a.createElement(m.b,{path:"/profile/",component:J}))}}]),a}(n.PureComponent),D=Object(f.b)(null,{restoreSession:function(){return function(e){var t=E.restoreSession();t&&e({type:"AUTH/USER_LOGIN",payload:t})}}})(A);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var F=a(10),_=a(31),C=a(24),P=a(12),K={currentUser:{},loginStatus:!1,tasks:[],receivedTasks:[]},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH/USER_LOGIN":return Object(P.a)({},e,{currentUser:t.payload,loginStatus:!0,tasks:t.payload.tasks,receivedTasks:t.payload.receivedTasks});case"AUTH/USER_LOGOUT":return K;case g:return Object(P.a)({},e,{tasks:[t.payload].concat(Object(C.a)(e.tasks))});case"PROFILE/DELETE_TASK":return Object(P.a)({},e,{tasks:e.tasks.filter((function(e){return e.id!==t.payload}))});case"PROFILE/DELETE_RECEIVED_TASK":return Object(P.a)({},e,{receivedTasks:e.receivedTasks.filter((function(e){return e.id!==t.payload}))});case"PROFILE/UPDATE_TASK":var a=Object(C.a)(e.tasks),n=a.map((function(e){return e.id})),r=n.indexOf(t.payload.id);return-1!==r&&(a[r]=t.payload),Object(P.a)({},e,{tasks:a});default:return e}},H=Object(F.c)({userReducer:G}),W=Object(F.d)(H,{},Object(F.a)(_.a)),q=r.a.createElement(f.a,{store:W},r.a.createElement(d.a,{basename:"/auth-task-manager"},r.a.createElement(r.a.StrictMode,null,r.a.createElement(D,null))));l.a.render(q,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[34,1,2]]]);
//# sourceMappingURL=main.31a87489.chunk.js.map